desc: Sum of 2^n-2^k
source: ISL 2014 N1
tags: [2020-03, oly, medium, nt, optimization]

---

Let $n\ge 2$ be an integer, and let $A_n$ be the set \[A_n=\{2^n-2^k\mid k\in\mathbb Z,\, 0\le k<n\}.\]
Determine the largest positive integer that cannot be written as the sum of one or more (not necessarily distinct) elements of $A_n$.

---

The answer is $(n-2)2^n+1$. It is not hard to check $(n-2)2^n+1$ is not a linear combination of elements of $A_n$: for binary reasons, the linear combination must include $2^n-2^k$ for each $1\le k<n$, hence \[(n-2)2^n+1\ge\sum_{k=1}^{n-1}\left(2^n-2^k\right)=(n-2)2^n+2,\]
contradiction. Hence $(n-2)2^n+1$ is not expressible.

We now check the upper bound. Say a number is \emph{$T$-expressible} if it can be expressed as the sum of $T$ elements of $A_n$.
\begin{itemize}
    \item All $k$ with $(n-2)2^n+2\le k\le(n-1)(2^n-1)$ are $(n-1)$-expressible. Indeed, $(n-1)2^n-k$ is among $1$, $2$, $\ldots$, $2^n-2$. All of these have at most $n-1$ digits in its binary representation.
    \item For $T\ge n$, All $k$ with $(T-1)(2^n-1)+1\le k\le T(2^n-1)$ are $T$-expressible. It suffices for $T\cdot2^n-k\in[T,(2^n-2)+T]$ to be expressible as $T$ elements of $\{1,2,\ldots,2^{n-1}\}$. For binary reasons, all such numbers may be expressed as the sum of at most $T$ powers of $2$. If such $k$ is expressible as $m$ powers of two, $m<T$, then $k$ can be expressed as $m+1$ powers of two: indeed, since $k\ge T$, one of these powers of two is $2^i$, with $i\ge1$. Then replace $2^i$ with two copies of $2^{i-1}$.
\end{itemize}
It is easy to check that this covers all integers greater than $(n-2)2^n+1$, so we are done.
