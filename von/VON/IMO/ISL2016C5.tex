desc: Intersecting diagonals are perpendicular
source: ISL 2016 C5
tags: [2019-10, oly, medium, combo, equality, optimization]

---

Let $n\ge3$ be a positive integer. Determine the maximal number of diagonals of a regular $n$-gon that can be drawn such that any two drawn diagonals which intersect in the interior of the $n$-gon are perpendicular.

---

The answer is $n-3$ if $n$ odd and $n-2$ if $n$ even. First suppose $n$ is odd.
\setcounter{iclaim}0
\begin{iclaim}
    If $n$ is odd, no two chords are perpendicular.
\end{iclaim}
\begin{proof}
    Assume otherwise, and that $\seg{AC}\perp\seg{BD}$. Then $\arc{AC}+\arc{BD}=180\dg$, so if the polygon has side length $1$, and $d(P,Q)$ is the distance from $P$ to $Q$ along the perimeter of the polygon, $d(A,C)+d(B,D)=n/2$, absurd.
\end{proof}

It follows that by induction, the answer is $n-3$, achieved by any triangulation. Henceforth assume $n$ is even. Call a chord \emph{fun} if it intersects another chord in the interior of the polygon, and \emph{boring} otherwise.
\begin{iclaim}
    All fun lines are either parallel or perpendicular.
\end{iclaim}
\begin{proof}
    Say we have two fun perpendicular lines $\ell_1$ and $\ell_2$ intersecting in the interior of the polygon. Then $\ell_1$ and $\ell_2$ divide the circumcircle into four arcs, each of which measures less than $180\dg$. Hence no two lines $m_1$ and $m_2$ are both contained in an arc.
\end{proof}

Now say that we have drawn $K$ fun lines. Call a vertex of the polygon \emph{fun} if it is the endpoint of a fun chord. Since each chord has two endpoints, and each fun vertex is the endpoint of at most two fun chords, the number of fun points is at most $K$, so the $K$ fun lines divide the circumcircle into at most $K$ arcs.

Call the length of one of these arcs the number of sides of the polygon that are within that arc. As shown above, if an arc has length $L\ge2$, we have $L+1$ valid vertices, so we can draw at most $L-2$ chords. Say that we have $J\le K$ arcs, and that for $i\le J$, $a_i$ refers to the length of the $i$th arc. Say that $b_i=1$ if $a_i=1$, and $b_i=2$ otherwise. Furthermore let $T$ be the number of arcs of length at least $2$, and $S$ the number of arcs of length $1$. Since sides do not count as diagonals, the number of diagonals drawn does not exceed \[T+\sum_{i=1}^J(a_i-b_i)\le K-S+\left(S+\sum_{i=1}^J(a_i-2)\right)=K+(n-2K)=n-K.\]
By definition, $K\ge2$, so the number of diagonals drawn is at most $n-2$. To achieve equality, take any vertex $A$, its neighbors $B$ and $C$, and its antipode $A'$; draw $\seg{AA'}$ and $\seg{BC}$, and triangulate the remaining $4$ regions.
