desc: f(x)+f(1/x)=1 and f(2x)=2f(f(x))
source: Ireland 1991/9
tags: [2019-10, oly, medium, alg, nt, FE, induction]

---

Find all functions $f:\mathbb Q_{>0}\to\mathbb Q_{>0}$ such that
\begin{enumerate}[label=(\roman*),itemsep=0em]
    \item $f(x)+f(1/x)=1$ and
    \item $f(2x)=2f(f(x))$ for all $x\in\mathbb Q_{>0}$.
\end{enumerate}

---

The answer is $f(x)=\frac x{x+1}$, which can be easily verified to work. We will prove that $f(m/n)=\frac m{m+n}$ for all relatively prime positive integers $m$ and $n$ by strong induction on $m+n$. The base case of $m+n=2$ is obvious: $f(1)=1/2$ by $x=1$ in the first condition.
\begin{customenv}{Case 1: $\pmb{m+n}$ is even}
    If $m$ and $n$ are both even, there is nothing to prove; henceforth assume they are both odd. Then \[f\left(\frac mn\right)=f\left(f\left(\frac m{n-m}\right)\right)=\frac12f\left(\frac m{\frac12(n-m)}\right),\]
    which is unique. Thus the hypothesis holds for $m/n$.
\end{customenv}
\begin{customenv}{Case 2: $\pmb{m+n}$ is odd}
    If $m$ is even and $n$ is odd, \[f\left(\frac mn\right)=2f\left(f\left(\frac{m/2}n\right)\right)=2f\left(\frac{m/2}{m/2+n}\right).\]
    Let $K=m+n$ and $g(j)=j/(K-j)$. Then by the above equation, $g(j)=2g(j/2)$ for $j$ even. Furthermore by the problem statement, $g(j)+g(K-j)=1$. Now consider the sequence defined as follows: If $j_i$ is even, then $j_{i+1}=j_i/2$, and if $j_i$ is odd, $j_{i+1}=(K-j_i)/2$.

    Then by Euler's Theorem, either $j_{\varphi(K)}=j_0$ or $j_{\varphi(K)}+j_0=1$. But $j_{\varphi(K)}$ can be expressed as a linear function of $j_0$ with linear coefficient $2^{\varphi(K)}$, so $j_0$ is uniquely determined. Since we have verified that $f(x)=\frac x{x+1}$ works, $m/n$ obeys the problem hypothesis.
\end{customenv}
