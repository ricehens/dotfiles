desc: n divides 1^k+2^k+...+n^k
source: EGMO TST 2019/3
tags: [2020-03, oly, tricky, nt, vp, sums, waltz]

---

Let $n$ be a positive integer such that the number \[\frac{1^k+2^k+\cdots+n^k}n\]
is an integer for any $k\in\{1,2,\ldots,99\}$. Prove that $n$ has no divisors between $2$ and $100$, inclusive.

---

Set $k=1$ to see that $n$ is odd. Let $p\ge3$ be a prime dividing $n$, and let $e=\nu_p(n)$. Then I claim \[\nu_p\left(\sum_{x=0}^{n-1}x^{p-1}\right)=e-1.\]
This will prove the problem by taking $p\le100$ a prime dividing $n$.

Note that \[\sum_{x=0}^{n-1}x^{p-1}\equiv\frac n{p^e}\sum_{x=0}^{p^e-1}x^{p-1}\pmod{p^e},\]
so we prove $\nu_p\left(\sum_{x=0}^{p^e-1}x^{p-1}\right)=e-1$. Define \[T_k:=\sum_{\nu_p(x)=k}x^{p-1},\quad\text{so that}\quad\sum_{x=0}^{p^e-1}x^{p-1}\equiv\sum_{k=0}^eT_k\pmod{p^e}.\]
If $g$ denotes a primitive root mod $p^{e-k}$, then \[T_k\equiv p^{k(p-1)}\sum_{i=0}^{\vphi(p^{e-k}-1)}g^{i(p-1)}\equiv\frac{g^{(p-1)\vphi(p^{e-k})}-1}{g^{p-1}-1}p^{k(p-1)}\pmod{p^e}.\]
By Lifting the Exponent, \[\nu_p\left(g^{(p-1)\vphi(p^{e-k})}-1\right)=\nu_p\left(g^{p-1}-1\right)+e-k-1,\]
so $\nu_p(T_k)=e-k-1+k(p-1)=e-1+k(p-2)$, which equals $e-1$ when $k=0$ and is at least $e$ otherwise. Thus \[\nu_p\left(\sum_{k=0}^eT_k\right)=\nu_p(T_0)=e-1,\]
as desired.
