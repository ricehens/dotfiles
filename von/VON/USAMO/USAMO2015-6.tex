desc: Multiset subset sum less than n(n+1)/2*lambda
source: USAMO 2015/6
tags: [2019-10, oly, hard, alg, analysis, sums, sequence]

---

Consider $0<\lambda<1$, and let $A$ be a multiset of positive integers. Let $A_n=\{a\in A:a\le n\}$. Assume that for every $n\in\mathbb N$, the multiset $A_n$ contains at most $n\lambda$ numbers. Show that there are infinitely many $n\in\mathbb N$ for which the sum of the elements in $A_n$ is at most $\frac{n(n+1)}2\lambda$.

---

Let $a_n$ be the multiplicity of $n$, and let $y_n=a_1+\cdots+a_n$ and $x_n=n\lambda-y_n>0$. Assume for contradiction that \[x_n<\frac{x_1+\cdots+x_{n-1}}n\quad\text{for all }n>N\]
for some large integer $N$.
\begin{claim*}
    Showing this is impossible solves the problem.
\end{claim*}
\begin{proof}
    Indeed, this implies that \[\sum_{k=1}^nka_k=(n+1)y_n-\sum_{k=1}^ny_k=\frac{n(n+1)}2\lambda-(n+1)x_n+\sum_{k=1}^nx_k>\frac{n(n+1)}2\lambda\]
    for sufficiently large $n$, contradiction.
\end{proof}

Denote $\varepsilon=\min(\lambda,1-\lambda)$. It is clear that $|x_n-x_{n-1}|\ge\varepsilon$ for all $n$. Say that $M$ is the maximum value of $x_n$, since the sequence is clearly bounded. Then since $\frac12(x_n+x_{n+1})<M-\frac12\varepsilon$ for all $n$, there is a large integer $N_1$ such that \[x_n<\frac{x_1+\cdots+x_{n-1}}n<M-\frac\varepsilon3\quad\text{for all }n>N_1.\]
(Note that $\frac13\varepsilon$ is just an arbitrary constant smaller than $\frac12\varepsilon$.) Now $M$ decreases by $\frac13\varepsilon$ every time we apply this argument, so eventually $M<0$, contradiction.
